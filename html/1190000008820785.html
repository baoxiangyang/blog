<p>作者 码龙喵 转载请注明出处</p></blockquote>
<h2>1.概述</h2>
<p>计算机领域水太深了，不可能什么都记住，所以只需要理解并记住核心的原理，其他的交给网络，用的时候查一下就可以了。因此整理了平时工作中自己觉得好用的命令。</p>
<h2>2.系统相关</h2>
<ul><li><p>查看手册命令</p></li></ul>
<blockquote><p>man</p></blockquote>
<ul><li><p>只查看当前下一级目录占用大小</p></li></ul>
<blockquote><p>du --max-depth=1 -h</p></blockquote>
<ul><li><p>查看某个进程是否在运行</p></li></ul>
<blockquote>
<p>ps -ef | grep prog | grep -v grep</p>
<p>pgrep prog</p>
</blockquote>
<ul><li><p>查看内存统计</p></li></ul>
<blockquote><p>free -m</p></blockquote>
<ul><li><p>查看系统任务运行情况（类似window的任务管理器）</p></li></ul>
<blockquote><p>top</p></blockquote>
<ul>
<li>
<p>根据内存或者CPU占用对进程排序</p>
<ul>
<li><p>内存排序：执行top，然后按“shift + m”，这时进程就会按照内存占用从大到小排序。</p></li>
<li><p>CPU排序：执行top即可，top默认是按照CPU占用排序，也可以执行“shift + p”从内存大小排序转换为CPU排序。</p></li>
</ul>
</li>
<li><p>查看系统CPU占用情况</p></li>
</ul>
<blockquote><p>mpstat -P ALL 2</p></blockquote>
<ul><li><p>查看系统io，内存，swap分区，cpu等汇总统计信息</p></li></ul>
<blockquote><p>vmstat 2</p></blockquote>
<ul><li><p>查看系统tcp连接情况</p></li></ul>
<blockquote><p>netstat -anpt</p></blockquote>
<h2>3.进程相关</h2>
<ul><li><p>杀掉所有某个程序的所有进程</p></li></ul>
<blockquote><p>killall program</p></blockquote>
<ul><li><p>强杀一个指定pid的进程，江湖俗称“酒杀”，一杀必中</p></li></ul>
<blockquote><p>kill -9 pid</p></blockquote>
<ul><li><p>查看某个程序的所有进程</p></li></ul>
<blockquote><p>pidof program</p></blockquote>
<ul><li><p>查看指定pid的进程的运行时加载的环境变量</p></li></ul>
<blockquote><p>cat /proc/pid/environ | tr -s '0' 'n'</p></blockquote>
<ul><li><p>通过pid查看对应的执行文件（这对查看来历不明的进程有帮助）</p></li></ul>
<blockquote><p>lsof -p pid | grep txt</p></blockquote>
<ul><li><p>查看指定pid的进程内存地址空间映射（查看进程运行时实际加载的是那个库）</p></li></ul>
<blockquote><p>pmap -x pid</p></blockquote>
<ul><li><p>查看程序的符号表（排查编译连接失败，调用异常等问题很好用）</p></li></ul>
<blockquote>
<p>nm file</p>
<p>readelf -s file</p>
</blockquote>
<ul><li><p>查看指定pid的进程线程关系树（查看某个开源程序是否是多线程模型）</p></li></ul>
<blockquote><p>pstree -p pid</p></blockquote>
<ul><li><p>查看指定pid的进程打开的文件</p></li></ul>
<blockquote><p>lsof -p pid</p></blockquote>
<ul><li><p>查看指定pid的进程当前运行时的堆栈</p></li></ul>
<blockquote><p>pstack pid</p></blockquote>
<ul><li><p>查看指定pid的进程当前在执行的系统调用</p></li></ul>
<blockquote><p>strace -p pid</p></blockquote>
<ul><li><p>查看指定pid的进程当前在执行的库调用</p></li></ul>
<blockquote><p>ltrace -p pid</p></blockquote>
<ul><li><p>查看指定程序依赖的动态链接库</p></li></ul>
<blockquote><p>ldd program</p></blockquote>
<h2>4.运营调试相关</h2>
<ul><li><p>从一堆文件中查找包含某个字符串的文件（编译一堆文件时有变量冲突时特别好用，可以快速定位在那些文件中声明了相同的变量）</p></li></ul>
<blockquote><p>find ./ -type f -name "<em>.c" -o -name "</em>.h" | xargs grep "strings"</p></blockquote>
<ul><li><p>查看文件被那些进程打开（对查看库被那些进程使用，在你要修改一个基础库在评估影响范围的时候就很好用）</p></li></ul>
<blockquote>
<p>fuser -v filename </p>
<p>lsof filename</p>
</blockquote>
<ul><li><p>对字符串求MD5值或者SHA1值（验证程序MD5和SHA1算法时特别有用）</p></li></ul>
<blockquote>
<p>echo -n "abcde123" | md5sum</p>
<p>echo -n "abcde123" | sha1sum</p>
</blockquote>
<ul><li><p>linux shell中如何快速查询历史命令</p></li></ul>
<blockquote><p>ctrl + r</p></blockquote>
<ul><li><p>查看执行历史带详细时间</p></li></ul>
<blockquote>
<p>export HISTTIMEFORMAT="%F %T <code>whoami</code> "</p>
<p>history</p>
</blockquote>
<ul><li><p>c++函数符号转换成c模式工具</p></li></ul>
<blockquote><p>c++filt</p></blockquote>
<ul><li><p>gdb设置打印完整字符串</p></li></ul>
<blockquote><p>set print element 0</p></blockquote>
<ul><li><p>scp跨主机远程拷贝</p></li></ul>
<blockquote><p>scp src user@host:dest</p></blockquote>
<ul><li><p>ssh登录远程主机</p></li></ul>
<blockquote><p>ssh user@host</p></blockquote>
<ul><li><p>返回当前用户的home目录</p></li></ul>
<blockquote>
<p>cd </p>
<p>cd ~</p>
</blockquote>
<ul><li><p>返回上一个目录</p></li></ul>
<blockquote><p>cd -</p></blockquote>
<ul><li><p>删除当前输入的命令</p></li></ul>
<blockquote><p>ctrl + u</p></blockquote>
<ul><li><p>中断当前命令的输入或者中断当前在执行的前台程序</p></li></ul>
<blockquote><p>ctrl + c</p></blockquote>
<ul><li><p>强制退出当前命令的执行，有时执行ctrl + c无用时采用</p></li></ul>
<blockquote><p>ctrl + \</p></blockquote>
<ul><li><p>实时查看日志文件的输出（只要日志有更新就能看到且是实时的）</p></li></ul>
<blockquote><p>tail -20f /home/xxx/log/yy.log</p></blockquote>
<ul><li><p>测试web服务工具</p></li></ul>
<blockquote>
<p>curl</p>
<p>wget</p>
</blockquote>
<ul><li><p>打包压缩命令</p></li></ul>
<blockquote><p>tar -zcvf test.tar ./*</p></blockquote>
<ul><li><p>解包解压命令</p></li></ul>
<blockquote><p>tar -zxvf test.tar</p></blockquote>
<h2>5.写在最后</h2>
<p>后续我会写一系列关于Linux后端研发的文章，为大家展示如何一步一步构建一个真正的Linux后端集群服务，记录一个“Linux C/C++后端研发菜鸟成长记”。</p>
<blockquote><p>传送门 <a href="https://segmentfault.com/a/1190000008830593">后端研发菜鸟成长记 第一章 入门 之 云服务器</a></p